var songList,$=window.Zepto,root=window.player,index=0,$scope=$(document.body),audio=new root.audioControl;function bindEvent(){$scope.on("play:change",function(o,n,t){audio.getAudio(songList[n].audio),"play"==audio.status&&audio.play(),root.pro.renderAllTime(songList[n].duration),root.render(songList[n]),root.pro.update(0)}),$scope.on("click",".prev-btn",function(){var o=controlManger.prev();$scope.trigger("play:change",o)}),$scope.on("click",".next-btn",function(){var o=controlManger.next();$scope.trigger("play:change",o)}),$scope.on("click",".play-btn",function(){"play"==audio.status?(audio.pause(),root.pro.stop()):(audio.play(),root.pro.start()),$(this).toggleClass("pause")})}function bindTouch(){var o=$scope.find(".slider-pointer"),n=$scope.find(".pro-bottom").offset(),e=n.left,r=n.width;o.on("touchstart",function(){root.pro.stop()}).on("touchmove",function(o){var n=(o.changedTouches[0].clientX-e)/r;0<n&&n<=1&&root.pro.update(n)}).on("touchend",function(o){var n=(o.changedTouches[0].clientX-e)/r;if(0<n&&n<=1){var t=n*songList[controlManger.index].duration;audio.playTo(t),$scope.find(".play-btn").addClass("pause"),root.pro.start(n)}})}function getData(o){$.ajax({type:"GET",url:o,success:function(o){bindEvent(),bindTouch(),root.render(o[0]),controlManger=new root.controlManger(o.length),songList=o,$scope.trigger("play:change",0)},error:function(){}})}getData("../mock/data.json");